<h1>Developing Sources</h1>
<h3>Basics</h3>
<p>
  To create your own source, all you need to do is to write an HTML file. Whatever you see on the screen will be visible on the stage during recording or streaming.
</p>
<h3>Usage</h3>
<p>
  You can test your own source by dragging the HTML file onto the stage. Alternatively, if you are locally or remotely hosting the source, you may add the file by clicking Add > Other > Webpage URL on the bottom panel of XSplit Broadcaster.
</p>
<h3>Items and Sources</h3>
<p>The main difference between the source and the item is that the source pertains to the base object while the item pertains to an object that inherits from the source.</p>
<p>In XSplit Broadcaster, the items that you see in the stage is usually an Item. Under the hood, each item extends from a base object that we refer to as the source. Changing the property of a source will affect all Items that extends from that source, whereas each item can have its own unique property.</p>
<p>The reason why we had to separate this two entities right now is due to the introduction of Global Sources, which is basically a feature of having multiple items sharing the same source. When one of the item updates a source level property, all its siblings will reflect those changes.</p>
<h3>Items</h3>
<pre class="language-javascript"><code>var xjs = require('xjs');

//For version 2.8 up
var Item = xjs.Item;

xjs.ready()
  .then(Item.getItemList)
  .then(function(myItem) {
    //Do something with your item here.
  });</code></pre>
<p><code>getItemList</code> returns the first item of the array from the items on the scene.</p>
<h3>Sources</h3>
<pre class="language-javascript"><code>var xjs = require('xjs');
//For version 2.7 and lower
var Source = xjs.Source;

xjs.ready()
  .then(Source.getCurrentSource)
  .then(function(mySource) {
    //Do something with your source here.
  });</code></pre>
<h3>Initializing Source Plugins</h3>
<p>As a source plugin developer, you must take into account the user-definable settings like size, position, position locking, keeping loaded in memory and etc. Setting these properties only once (on initial add) is ideal, to prevent it from overwriting user defined changes.</p>
<p>This can be done by checking the configuration of the source on initialization. If the configuration is empty, this would mean that the source was just added into the scene. If not, then the source/item was already added to the stage and was just refreshed, the scene was reloaded or changed into, or XBC was just opened.</p>
<pre class="language-javascript"><code>var xjs = require('xjs');
var Item = xjs.Item;
 
xjs.ready()
  .then(Item.getItemList)
  .then(function(myItem) {
    return myItem.loadConfig();
  }).then(function(config) {
    if(Object.keys(config) > 0){
      //Load previous settings
    } else {
      //Set initial item rendering settings here
    }
  });</code></pre>
  <p>This assumes that you are setting and saving predefiened configuations on your source plugins.</p>
<h3>Configuration objects</h3>
<p>
  Aside from the basic set of item properties (which include position and chroma keying, among many others), a custom configuration object may also be used for items. Configuration objects are simple JSON objects that items can save to memory.
</p>
<p>
  There is no standard format for the configuration objects; developers may use any valid JSON. It is the responsibility of the item to load the saved object every time the item is loaded, and to apply the object's various settings onto the item's HTML. This is ideally done when the framework's ready event is fired.
</p>
<pre class="language-javascript"><code>var xjs = require('xjs');

//For version 2.8 up
var Item = xjs.Item;

xjs.ready()
  .then(Item.getItemList)
  .then(function(myItem) {
    return myItem.loadConfig();
  }).then(function(config) {
    // apply the loaded configuration object onto the item
  });

//For version 2.7 and lower
var Source = xjs.Source;

xjs.ready()
  .then(Source.getCurrentSource)
  .then(function(mySource) {
    return mySource.loadConfig();
  }).then(function(config) {
    // apply the loaded configuration object onto the item
  });
  </code></pre>
<p>
  To let items save its own configuration, it simply needs to call saveConfig() on its <code>Item</code> instance.
</p>
<h3>Item Plugin Window utility</h3>
<p>
  There is a utility class for source plugins which is used in conjunction with the properties window. The <code>SourcePluginWindow</code> class is an Event Emitter. Currently, its only use to plugin developers is to save configuration objects as instructed by the properties window. See this <a href="tutorials.html#/sourceconfig#man-config-obj" target="_blank">section</a> for more details.
